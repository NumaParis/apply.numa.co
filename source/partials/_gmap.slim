/requires :
/= javascript_include_tag 'https://maps.googleapis.com/maps/api/js?key=AIzaSyBjSkiy68CUTGVAELIKh_goNZTFRRzv9rw'
sass:
	#google-container
		position: relative
		width: 100%
		min-height: 600px
		background-color: #e7eaf0

	// @media only screen and (min-width: 768px) {
	//   #google-container {
	//     height: 300px;
	//   }
	// }
	// @media only screen and (min-width: 1170px) {
	//   #google-container {
	//     height: 600px;
	//   }
	// }

	#cd-google-map
		position: relative
		margin-bottom: 0
		padding-bottom: 0

	.fbx
		display: block
		height: 1px
		width: 1px


	.sqb
		font-size: 1.2em
		cursor: pointer
		background-color: #000
		color: #fff
		padding: 5px 10px
		margin-left: 10px
		margin-bottom: 1px


	#cd-zoom-in, #cd-zoom-out
		height: 32px
		width: 32px
		background-repeat: no-repeat
		background-size: 32px 64px
		background-image: url("../images/cd-icon-controller.svg")

	#loc1.sqb
		margin-top: 10px

	#loc1, #loc2, #loc3, #loc4, #loc5
		background-image: none
		&:hover
			background: yellow
			color: #000 


	.no-touch #cd-zoom-in:hover,
	.no-touch #cd-zoom-out:hover
		background-color: #d36868

	@media only screen and (min-width: 768px)
		// #cd-zoom-in, #cd-zoom-out
		#cd-zoom-in
			margin-top: 10px

	@media only screen and (min-width: 768px)
		// #cd-zoom-in
		#cd-zoom-out 
			background-position: 50% -32px

section#cd-google-map
  #google-container
  #loc1.sqb NUMA: 39 Rue du Caire
  #loc2.sqb La Gaîté Lyrique: 3bis Rue Papin
  #loc3.sqb La Paillasse: 226 Rue Saint-Denis
  #loc4.sqb ESCP: 79 Avenue de la République
  #loc5.sqb CND: 1 Rue Victor Hugo
  #loc6.sqb ESMOD, 12 Rue de la Rochefoucauld
  #cd-zoom-in.sqb
  #cd-zoom-out.sqb

javascript:

	var latitude = 48.867721,
		longitude = 2.34963,
		map_zoom = 5;

	//google map custom marker icon - .png fallback for IE11
	var is_internetExplorer11= navigator.userAgent.toLowerCase().indexOf('trident') > -1;
	var marker_url = ( is_internetExplorer11 ) ? 'images/cd-icon-location.png' : 'images/cd-icon-location.svg';
		
	//define the basic color of your map, plus a value for saturation and brightness
	var	main_color = '#2d313f',
		saturation_value= 10,
		brightness_value= 10;
	
	//we define here the style of the map
	var style= [{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#93d8a5"},{"visibility":"on"}]}];

	//set google map options
	var map_options = {
	  	center: new google.maps.LatLng(latitude, longitude),
	  	zoom: map_zoom,
	  	panControl: false,
	  	zoomControl: false,
	  	mapTypeControl: false,
	  	streetViewControl: false,
	  	mapTypeId: google.maps.MapTypeId.ROADMAP,
	  	scrollwheel: false,
	  	styles: style
	}
	//inizialize the map
	var map = new google.maps.Map(document.getElementById('google-container'), map_options);

	//function initialize() {
	  //setMarkers(map, beaches);
	//}


	// The locations 
	var numa = new google.maps.LatLng(48.867721, 2.34963);
	var gaite = new google.maps.LatLng(12.9804128, 77.5984471);
	var pail = new google.maps.LatLng(48.868451, 2.352168);
	var escp = new google.maps.LatLng(48.864176, 2.380883);
	var cnd = new google.maps.LatLng(48.894092,2.406816);

	var lieux = [
	    ['NUMA', 48.867721, 2.34963],
	    ['Gaite', 48.86677, 2.35366],
	    ['La Paillase', 48.868451, 2.352168],
	    ['ESCP', 48.864176, 2.380883],
	    ['CND', 48.894092,2.406816],
	];

	// var contentString = '<div id="content">'+
	//   '<div id="siteNotice">'+
	//   '</div>'+
	//   '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
	//   '<div id="bodyContent">'+
	//   '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
	//   'sandstone rock formation in the southern part of the '+
	//   'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
	//   'south west of the nearest large town, Alice Springs; 450&#160;km '+
	//   '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
	//   'features of the Uluru - Kata Tjuta National Park. Uluru is '+
	//   'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
	//   'Aboriginal people of the area. It has many springs, waterholes, '+
	//   'rock caves and ancient paintings. Uluru is listed as a World '+
	//   'Heritage Site.</p>'+
	//   '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
	//   'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
	//   '(last visited June 22, 2009).</p>'+
	//   '</div>'+
	//   '</div>';

	// var infowindow = new google.maps.InfoWindow({
	//   content: contentString
	// });






	//// -----------
	function setMarkers(map, locations) {
	  // Add markers to the map

	  // Marker sizes are expressed as a Size of X,Y
	  // where the origin of the image (0,0) is located
	  // in the top left of the image.

	  // Origins, anchor positions and coordinates of the marker
	  // increase in the X direction to the right and in
	  // the Y direction down.

	  var image = {
	    url: 'images/cd-icon-location.png',
	    // This marker is 20 pixels wide by 32 pixels tall.
	    // size: new google.maps.Size(20, 32),
	    // The origin for this image is 0,0.
	    origin: new google.maps.Point(0,0),
	    // The anchor for this image is the base of the flagpole at 0,32.
	    anchor: new google.maps.Point(0, 32)
	  };
	  // Shapes define the clickable region of the icon.
	  // The type defines an HTML &lt;area&gt; element 'poly' which
	  // traces out a polygon as a series of X,Y points. The final
	  // coordinate closes the poly by connecting to the first
	  // coordinate.
	  // var shape = {
	  //     coords: [1, 1, 1, 20, 18, 20, 18 , 1],
	  //     type: 'poly'
	  // };
	  for (var i = 0; i < locations.length; i++) {
	    var lieu = locations[i];
	    var myLatLng = new google.maps.LatLng(lieu[1], lieu[2]);
	    var marker = new google.maps.Marker({
	        position: myLatLng,
	        map: map,
	        icon: image,
	        // shape: shape,
	        title: lieu[0],
	        zIndex: lieu[3]
	    });
	  }
	}


	setMarkers(map, lieux);

	//add custom buttons for the zoom-in/zoom-out on the map
	function CustomZoomControl(controlDiv, map) {
		//grap the zoom elements from the DOM and insert them in the map 
	  	var controlUIzoomIn= document.getElementById('cd-zoom-in'),
	  		controlUIzoomOut= document.getElementById('cd-zoom-out'),
	  		controlUIloc1= document.getElementById('loc1'),
	  		controlUIloc2= document.getElementById('loc2'),
	  		controlUIloc3= document.getElementById('loc3'),
	  		controlUIloc4= document.getElementById('loc4'),
	  		controlUIloc5= document.getElementById('loc5');
	  		controlUIloc6= document.getElementById('loc6');
	  	// The locations etc.
	  	controlDiv.appendChild(controlUIloc1);
	  	controlDiv.appendChild(controlUIloc2);
	  	controlDiv.appendChild(controlUIloc3);
	  	controlDiv.appendChild(controlUIloc4);
	  	controlDiv.appendChild(controlUIloc5);
	  	controlDiv.appendChild(controlUIloc6);
	  	controlDiv.appendChild(controlUIzoomIn);
	  	controlDiv.appendChild(controlUIzoomOut);


		// Setup the click event listeners and zoom-in or out according to the clicked element
		google.maps.event.addDomListener(controlUIzoomIn, 'click', function() {
			map.setZoom(map.getZoom()+1)
		});
		google.maps.event.addDomListener(controlUIzoomOut, 'click', function() {
			map.setZoom(map.getZoom()-1)
		});

		google.maps.event.addDomListener(controlUIloc1, 'click', function() {
			map.setCenter(numa)
		});
		google.maps.event.addDomListener(controlUIloc2, 'click', function() {
			map.setCenter(gaite)
		});
		google.maps.event.addDomListener(controlUIloc3, 'click', function() {
			map.setCenter(pail)
		});
		google.maps.event.addDomListener(controlUIloc4, 'click', function() {
			var infowindow = new google.maps.InfoWindow({
				content: 'boo <img src=\"http://numa.moscow/images/logo_thehive.png\">'
			});
			var marker = new google.maps.Marker({
				position: escp,
				map: map,
			});
			map.setCenter(escp)
			infowindow.open(map,marker);
		});
		google.maps.event.addDomListener(controlUIloc5, 'click', function() {
		    var infowindow = new google.maps.InfoWindow({
		    	content: 'boo <img src=\"http://numa.moscow/images/logo_thehive.png\">'
		    });
		    var marker = new google.maps.Marker({
		    	position: cnd,
		    	map: map,
		    });
		    map.setCenter(cnd)
		    infowindow.open(map,marker);
		});
		google.maps.event.addDomListener(controlUIloc6, 'click', function() {
		    map.setCenter(escp)
		});
	}

	var zoomControlDiv = document.createElement('div');
		var zoomControl = new CustomZoomControl(zoomControlDiv, map);

		//insert the zoom div on the top left of the map
		map.controls[google.maps.ControlPosition.LEFT_TOP].push(zoomControlDiv);
